(()=>{"use strict";class e{constructor(e,t,n,r,l){this.type=e,this.client=t,this.details=n,this.amount=r,this.time=l}format(){return`${this.client} owes $${this.amount} for ${this.details}`}}class t{constructor(e,t,n,r,l){this.type=e,this.recipient=t,this.details=n,this.amount=r,this.time=l}format(){return`${this.recipient} is owed $${this.amount} for ${this.details}`}}const n=(e,t)=>(console.log(e,"TYPE"),e?t.filter((e=>"invoice"===e.type)):e?t:t.filter((e=>"payment"===e.type))),r=document.querySelector("ul"),l=new class{constructor(e){this.container=e}render(e){if(this.container.innerHTML="",e)e.map((e=>{const t=document.createElement("li"),n=document.createElement("h4");n.innerText=e.type,t.append(n);const r=document.createElement("span");r.innerText=e.time,t.append(r);const l=document.createElement("p");"invoice"===e.type?l.innerText=`${e.client} paid $${e.amount} for ${e.details}`:l.innerText=`${e.recipient} has been paid $${e.amount} for ${e.details}`,t.append(l),this.container.append(t)}));else{const e=document.createElement("h1");e.innerText="The log is empty",this.container.append(e)}}}(r);let o=localStorage.getItem("finances")?JSON.parse(localStorage.getItem("finances")||""):[];console.log(o),o.length>0?l.render(o):l.render(null);const s=document.querySelector(".new-item-form"),c=document.querySelector("#type"),a=document.querySelector("#tofrom"),i=document.querySelector("#details"),d=document.querySelector("#amount");console.log(d.value.length,"AMOUNT"),a.addEventListener("change",(e=>{""===e.target.value?a.style.border="1px solid red":a.style.border="1px solid black"})),i.addEventListener("change",(e=>{""===e.target.value?i.style.border="1px solid red":i.style.border="1px solid black"})),d.addEventListener("change",(e=>{""===e.target.value?d.style.border="1px solid red":d.style.border="1px solid black"})),s.addEventListener("submit",(n=>{n.preventDefault();var r=new Date,s=r.getDate()+"/"+(r.getMonth()+1)+"/"+r.getFullYear()+" @ "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds();let u;const y=document.querySelector(".error-msg");if(""===a.value||""===i.value||""===d.value?(""===a.value&&(a.style.border="1px solid red"),""===i.value&&(i.style.border="1px solid red"),d.value.length<=0&&(d.style.border="1px solid red"),u=!1):u=!0,u){y.style.visibility="hidden";let n,r=[c.value,a.value,i.value,d.valueAsNumber,s];n="invoice"===c.value?new e(...r):new t(...r),console.log(n),o.push(n),console.log(o,"finances"),localStorage.setItem("finances",JSON.stringify(o)),l.render(o),a.value="",i.value="",d.value=""}else y.style.visibility="visible",y.innerText="All fields are required"}));let u=!1;const y=document.querySelector(".btn-all"),f=document.querySelector(".btn-invoices"),m=document.querySelector(".btn-payments");console.log(f),y.addEventListener("click",(()=>{u=!1,y.style.background="#3c486b",y.style.color="#ffffff",f.style.background="transparent",f.style.color="#3c486b",m.style.background="transparent",m.style.color="#3c486b",l.render(o)})),f.addEventListener("click",(()=>{u=!0,f.style.background="#3c486b",f.style.color="#ffffff",m.style.background="transparent",m.style.color="#3c486b",y.style.background="#ffffff",y.style.color="#3c486b";const e=n(u,o);l.render(e)})),m.addEventListener("click",(()=>{u=!1,m.style.background="#3c486b",m.style.color="#ffffff",f.style.background="transparent",f.style.color="#3c486b",y.style.background="#ffffff",y.style.color="#3c486b";const e=n(u,o);l.render(e)})),document.querySelector(".btn-clear").addEventListener("click",(()=>{confirm("Are you sure you want to clear the list?")&&(l.render(null),localStorage.removeItem("finances"),o=[])}))})();